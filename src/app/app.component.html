<div class="page-header">
  <h1>Currency Converter</h1>
</div>

<mat-grid-list cols="3" rowHeight="2:1">
  <mat-grid-tile>
    <div class="input-row">
      <mat-label class="label">Amount</mat-label>
      <input class="input" placeholder="Enter Amount" [(ngModel)]="amount">
    </div>
  </mat-grid-tile>
  <mat-grid-tile>
    <div class="input-row">
      <mat-label class="label">From</mat-label>
      <mat-select class="input" placeholder="Select Currency" [(ngModel)]="selectedFromCurrency" >
        <mat-option *ngFor="let currency of currencyList" [value]="currency">{{ currency }}</mat-option>
      </mat-select>
    </div>
  </mat-grid-tile>
  <mat-grid-tile>
    <div class="input-row">
      <mat-label class="label">To</mat-label>
      <mat-select class="input" placeholder="Select Currency" [(ngModel)]="selectedToCurrency" >
        <mat-option *ngFor="let currency of currencyList" [value]="currency">{{ currency }}</mat-option>
      </mat-select>
    </div>
  </mat-grid-tile>
</mat-grid-list>

<!-- Display the converted amount -->
<div style="text-align: center;">
<button mat-button (click)="getExchangeRates(); selectedFilter = '7d'; hasConvertButtonClicked = true;">Convert</button>
</div>




<!-- Separate mat-grid-list for vertical labels -->
<mat-grid-list cols="1" rowHeight="5:1">
  <mat-grid-tile>
    <div class="vertical-labels">
      <mat-label class="conversion-label" *ngIf="convertedAmount !== null">{{amount}} {{selectedFromCurrency}} = {{ convertedAmount | number }} {{selectedToCurrency}}</mat-label>
      <mat-label class="conversion-label" *ngIf="convertedAmount !== null && amount !== 1">1 {{selectedFromCurrency}} = {{exchangeRate}} {{selectedToCurrency}}</mat-label>
      <!-- <mat-label class="conversion-label">1 {{selectedToCurrency}} = 0.2345 AUD</mat-label> -->
    </div>
  </mat-grid-tile>
</mat-grid-list>

<div style="text-align: center;" *ngIf="hasConvertButtonClicked">
  <button  mat-button (click)="fetchHistoricalRates('7d')">7 Days</button>
  <button  mat-button (click)="fetchHistoricalRates('1m')">1 Month</button>
  <button  mat-button (click)="fetchHistoricalRates('6m')">6 Months</button>
</div>

<div *ngIf="showGraph">
  <div id="container" style="width: 100%; height: 400px;"></div>
</div>

<div *ngIf="showGraph">
  <mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.date }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="rate">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Rate</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.rate }}</mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>
</div>


<!-- <router-outlet></router-outlet> -->
